<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function($scope) {
  /* widget controller */
  var c = this;
	
	$scope.boletas = create_json_fake();
	$scope.option_radio = 'analytic';
	
	console.log('$scope.sort_key: ' + $scope.sort_key);
	console.log('$scope.asc: ' + $scope.asc);
	console.log('$scope.icon_blue_color: ' + $scope.icon_blue_color);
	console.log('$scope.desc: ' + $scope.desc);
	console.log('$scope.reverse: ' + $scope.reverse);
	console.log('');
	
	$scope.sort = function(key_name) {
		$scope.sort_key = key_name;
		
		console.log('fora $scope.sort_key: ' + $scope.sort_key);
		
		if (($scope.asc == undefined && $scope.desc == undefined) || $scope.desc == false) { // Sort Asc
			
			$scope.asc = true;
			
			$scope.icon_blue_color = true;
			
			$scope.desc = undefined;
			$scope.reverse = false;
			
			console.log('if $scope.sort_key: ' + $scope.sort_key);
			console.log('if $scope.asc: ' + $scope.asc);
			console.log('if $scope.icon_blue_color: ' + $scope.icon_blue_color);
			console.log('if $scope.desc: ' + $scope.desc);
			console.log('if $scope.reverse: ' + $scope.reverse);
			console.log('');
			
		} else if ($scope.asc) { // Sort Desc
			
			$scope.desc = true;
			
			$scope.icon_blue_color = true;
			
			$scope.asc = false;
			$scope.reverse = true;
			
			console.log('else if asc $scope.sort_key: ' + $scope.sort_key);
			console.log('else if asc $scope.asc: ' + $scope.asc);
			console.log('else if asc $scope.icon_blue_color: ' + $scope.icon_blue_color);
			console.log('else if asc $scope.desc: ' + $scope.desc);
			console.log('else if asc $scope.reverse: ' + $scope.reverse);
			console.log('');
			
		} else if ($scope.desc) { // Reset sort
			
			$scope.icon_blue_color = false;
			
			$scope.asc = true;
			$scope.desc = false;
			
			console.log('else if desc $scope.sort_key: ' + $scope.sort_key);
			console.log('else if desc $scope.asc: ' + $scope.asc);
			console.log('else if desc $scope.icon_blue_color: ' + $scope.icon_blue_color);
			console.log('else if desc $scope.desc: ' + $scope.desc);
			console.log('else if desc $scope.reverse: ' + $scope.reverse);
			console.log('');
		}
	}
	
	$scope.reset_business_table = function(option_radio) {
		$scope.sort_key = '';
		$scope.asc = undefined;
		$scope.desc = undefined;
		$scope.reverse = undefined;
	}
	
	function create_json_fake() {
    var json_fake = [];
		var instruments = [
			"violão",
			"guitarra",
			"baixo",
			"bateria",
			"piano",
			"teclado",
			"saxofone",
			"trompete",
			"violino",
			"flauta",
			"clarinete",
			"oboé",
			"fagote",
			"trombone",
			"tuba",
			"harpa",
			"órgão",
			"acordeão",
			"banjo",
			"cavaquinho",
			"ukulele",
			"harmônica",
			"xilofone",
			"marimba",
			"timpani",
			"congas",
			"bongô",
			"cuíca",
			"pandeiro",
			"tamborim",
			"caixa de guerra",
			"castanholas",
			"triângulo",
			"agogo",
			"chocalho",
			"guiro",
			"reco-reco",
			"prato de ataque",
			"prato de condução",
			"prato de chimbal",
			"tímpanos",
			"gongo",
			"sinos",
			"sinos tubulares",
			"trompa",
			"corno francês",
			"trombeta",
			"sinos",
			"tambor",
			"gaita",
			"cítara"
		];

		var brokerages = [
			"XP Investimentos",
			"Easynvest",
			"Clear Corretora",
			"Modalmais",
			"Rico Investimentos",
			"Avenue Securities",
			"Mirae Asset",
			"BTG Pactual Digital",
			"Genial Investimentos",
			"Órama Investimentos",
			"Santander Corretora",
			"Bradesco Corretora",
			"Itaú Corretora",
			"BB Investimentos",
			"Necton Investimentos",
			"Guide Investimentos",
			"Nova Futura Investimentos",
			"Toro Investimentos",
			"Ágora Investimentos",
			"MyCAP Investimentos",
			"Ativa Investimentos",
			"Inter DTVM",
			"Elite Investimentos",
			"Nova Investimentos",
			"RPP Capital Investimentos",
			"Geração Futuro Corretora de Valores",
			"Planner Corretora de Valores",
			"Geral Investimentos",
			"Safra Corretora de Valores",
			"Socopa Corretora",
			"H. Commcor",
			"Coinvalores Corretora de Valores",
			"Magliano Corretora de Valores",
			"Spinelli Corretora",
			"Renascença DTVM",
			"Um Investimentos",
			"Guide Life Corretora de Seguros",
			"Polo Invest",
			"ICAP Brasil",
			"Banco Paulista",
			"Geração Futuro",
			"Citi Corretora",
			"Omni Banco",
			"J. P. Morgan Corretora",
			"CM Capital",
			"Fator Corretora",
			"UBS Corretora de Câmbio, Títulos e Valores Mobiliários",
			"HSBC Corretora de Valores",
			"Ativa Investimentos",
			"Pax Corretora de Valores"
		];

    var actions = [
			"AAPL", // Apple Inc.
			"MSFT", // Microsoft Corporation
			"AMZN", // Amazon.com, Inc.
			"GOOG", // Alphabet Inc. Class C
			"FB",   // Facebook, Inc.
			"TSLA", // Tesla, Inc.
			"NVDA", // NVIDIA Corporation
			"JPM",  // JPMorgan Chase & Co.
			"JNJ",  // Johnson & Johnson
			"V",    // Visa Inc.
			"UNH",  // UnitedHealth Group Incorporated
			"BAC",  // Bank of America Corporation
			"DIS",  // The Walt Disney Company
			"MA",   // Mastercard Incorporated
			"HD",   // The Home Depot, Inc.
			"PG",   // The Procter & Gamble Company
			"PYPL", // PayPal Holdings, Inc.
			"VZ",   // Verizon Communications Inc.
			"KO",   // The Coca-Cola Company
			"NFLX", // Netflix, Inc.
			"ADBE", // Adobe Inc.
			"CSCO", // Cisco Systems, Inc.
			"CRM",  // salesforce.com, inc.
			"MRK",  // Merck & Co., Inc.
			"WMT",  // Walmart Inc.
			"PEP",  // PepsiCo, Inc.
			"T",    // AT&T Inc.
			"MCD",  // McDonald's Corporation
			"ABT",  // Abbott Laboratories
			"BA",   // The Boeing Company
			"CVX",  // Chevron Corporation
			"XOM",  // Exxon Mobil Corporation
			"CAT",  // Caterpillar Inc.
			"INTC", // Intel Corporation
			"GE",   // General Electric Company
			"C",    // Citigroup Inc.
			"IBM",  // International Business Machines Corporation
			"ORCL", // Oracle Corporation
			"MMM",  // 3M Company
			"NKE",  // NIKE, Inc.
			"PFE",  // Pfizer Inc.
			"DISCA",// Discovery, Inc.
			"SBUX", // Starbucks Corporation
			"SPOT", // Spotify Technology S.A.
			"TWTR", // Twitter, Inc.
			"UBER", // Uber Technologies, Inc.
			"WFC",  // Wells Fargo & Company
			"TWTR", // Twitter, Inc.
			"UBER", // Uber Technologies, Inc.
			"WFC",  // Wells Fargo & Company
		];

    for(var i = 0; i < 50; i++) {
        var fake = {};

        fake.boleta_number = generate_random_number();
        fake.transaction = generate_transaction();
        fake.instrument = instruments[i];
        fake.brokerage = brokerages[i];
        fake.amount = 10 * generate_random_number();
        fake.average_price = (100 * generate_random_number()) / 2;
        fake.unit_price = 100 * generate_random_number();
        fake.finance = 1000 * generate_random_number();
        fake.action = actions[i];

        json_fake.push(fake);
    }
		
		function generate_transaction() {
			var code = "";
			var characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
			
			for (var i = 0; i < 6; i++) {
				code += characters.charAt(Math.floor(Math.random() * characters.length));
			}
			
			return code;
		}
		
		function generate_random_number() {
			return Math.floor(Math.random() * 1000) + 100;
		}


    return json_fake;
	}

};]]></client_script>
        <controller_as>c</controller_as>
        <css>.manager-operator {
	background-color: #FFF;
  border: 1px solid #3354fd;
  padding: 5px 20px;
  border-radius: 4px;
  font-size: 12px;
}

.my-panel {
  margin-bottom: 5px;
}

.my-panel-primary {
  border-color: #3354fd !important;
}

.container-fluid &gt; div {
  padding: 4px;
}

.my-panel-body {
	padding: 5px !important;
}

.my-panel-heading {
  color: #000 !important; 
  background-color: #e4ecff !important;
  font-size: 16px !important;
  padding: 1px 16px;
}

.my-btn-info {
  color: #000 !important;
  background-color: #e4ecff !important;
  border-color: #005AA5 !important;
  font-weight: 600;
}

table {
  border-collapse: separate;
  border-spacing: 0px;
  width: 100%;
  min-width: max-content;
}

th {
	position: sticky;
  top: 0px;
}

.table-wrapper {
  max-height: 240px;
  overflow-y: scroll;
}

table.business-table thead tr th {
  background-color: #e4ecff;
  text-align: center;
  vertical-align: middle;
}

.table-wrapper::-webkit-scrollbar {
  width: 10px;
}

.table-wrapper::-webkit-scrollbar-track {
  background-color: #DDD;
  border-radius: 10px;
}

.table-wrapper::-webkit-scrollbar-thumb {
  background-color: #BBB;
  border-radius: 10px;
}

.sort-icon {
	font-size: 16px;
}

.icon-blue-color {
	color: #3354fd;
}

.flex {
  display: flex;
  align-items: center;
}

.grid {
  display: grid;
}

.flex-1 {
  flex: 1;
}

.flex-2 {
  flex: 2;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>table_filter_and_sort_1</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>Table Filter And Sort 1</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {  /* populate the 'data' object */  /* e.g., data.table = $sp.getValue('table'); */})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>leandro.lopes</sys_created_by>
        <sys_created_on>2023-03-10 20:06:40</sys_created_on>
        <sys_id>cd90123497296d109fd237971153af9b</sys_id>
        <sys_mod_count>11</sys_mod_count>
        <sys_name>Table Filter And Sort 1</sys_name>
        <sys_package display_value="My Widgets" source="x_821667_my_widget">3d3b07fe971121109fd237971153affc</sys_package>
        <sys_policy/>
        <sys_scope display_value="My Widgets">3d3b07fe971121109fd237971153affc</sys_scope>
        <sys_update_name>sp_widget_cd90123497296d109fd237971153af9b</sys_update_name>
        <sys_updated_by>leandro.lopes</sys_updated_by>
        <sys_updated_on>2023-03-10 21:15:15</sys_updated_on>
        <template><![CDATA[<div class="manager-operator">
  <div class="panel panel-primary my-panel my-panel-primary">    
    <div class="panel-body my-panel-body">
    	<div class="container-fluid">
        <div class="row">
          <div class="col-md-12">
            <label>${$scope.sort_key:} {{ sort_key }}</label>
            <div class="table-wrapper">
              <table class="table table-bordered table-striped business-table text-center">
                <thead>
                  <tr> 
                    <th ng-show="option_radio == 'analytic'">${Número}</th>
                    <th>${Transação}</th>
                    <th>
                      ${Instrumento} <br />
                      <input type="text" name="instrument" id="instrument" ng-model="search.instrument"/>
                    </th>
                    <th>
                      ${Corretora} <br />
                      <input type="text" name="brokerage" id="brokerage" ng-model="search.brokerage"/>
                    </th>
                    <th>
                      <div class="flex">
                        <div class="flex-1">
                          ${Quantidade}
                        </div>
                        <div class="flex-2 grid">
                          <i 
                             class="fa fa-sort-amount-asc sort-icon" 
                             aria-hidden="true" 
                             ng-class="{'icon-blue-color': sort_key == 'amount' && icon_blue_color && asc, hidden: sort_key == 'amount' && desc, show: sort_key == 'amount' && asc}" 
                             ng-click="sort('amount')">
                          </i>
                        	<i 
                             class="fa fa-sort-amount-desc hidden sort-icon" 
                             aria-hidden="true" 
                             ng-class="{'icon-blue-color': sort_key == 'amount' && icon_blue_color && desc, hidden: sort_key == 'amount' && asc, show: sort_key == 'amount' && desc}" 
                             ng-click="sort('amount')">
                          </i>
                        </div>
                      </div>
                    </th>
                    <th ng-show="option_radio == 'synthetic'">
                      <div class="flex">
                        <div class="flex-1">
                          ${PM}
                        </div>
                        <div class="flex-2 grid">
                          <i 
                             class="fa fa-sort-amount-asc sort-icon" 
                             aria-hidden="true" 
                             ng-class="{'icon-blue-color': sort_key == 'average_price' && icon_blue_color && asc, hidden: sort_key == 'average_price' && desc, show: sort_key == 'average_price' && asc}" 
                             ng-click="sort('average_price')">
                          </i>
                        	<i 
                             class="fa fa-sort-amount-desc hidden sort-icon" 
                             aria-hidden="true" 
                             ng-class="{'icon-blue-color': sort_key == 'average_price' && icon_blue_color && desc, hidden: sort_key == 'average_price' && asc, show: sort_key == 'average_price' && desc}" 
                             ng-click="sort('average_price')">
                          </i>
                        </div>
                      </div>
                    </th>
                    <th ng-show="option_radio == 'analytic'">
                      <div class="flex">
                        <div class="flex-1">
                          ${PU}
                        </div>
                        <div class="flex-2 grid">
                          <i 
                             class="fa fa-sort-amount-asc sort-icon" 
                             aria-hidden="true" 
                             ng-class="{'icon-blue-color': sort_key == 'unit_price' && icon_blue_color && asc, hidden: sort_key == 'unit_price' && desc, show: sort_key == 'unit_price' && asc}" 
                             ng-click="sort('unit_price')">
                          </i>
                        	<i 
                             class="fa fa-sort-amount-desc hidden sort-icon" 
                             aria-hidden="true" 
                             ng-class="{'icon-blue-color': sort_key == 'unit_price' && icon_blue_color && desc, hidden: sort_key == 'unit_price' && asc, show: sort_key == 'unit_price' && desc}" 
                             ng-click="sort('unit_price')">
                          </i>
                        </div>
                      </div>
                    </th>
                    <th>
                      <div class="flex">
                        <div class="flex-1">
                          ${Financeiro}
                        </div>
                        <div class="flex-2 grid">
                          <i 
                             class="fa fa-sort-amount-asc sort-icon" 
                             aria-hidden="true" 
                             ng-class="{'icon-blue-color': sort_key == 'finance' && icon_blue_color && asc, hidden: sort_key == 'finance' && desc, show: sort_key == 'finance' && asc}" 
                             ng-click="sort('finance')">
                          </i>
                        	<i 
                             class="fa fa-sort-amount-desc hidden sort-icon" 
                             aria-hidden="true" 
                             ng-class="{'icon-blue-color': sort_key == 'finance' && icon_blue_color && desc, hidden: sort_key == 'finance' && asc, show: sort_key == 'finance' && desc}" 
                             ng-click="sort('finance')">
                          </i>
                        </div>
                      </div>
                    </th>
                    <th ng-show="option_radio == 'analytic'">${Ação}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="boleta in boletas | filter:search | orderBy:sort_key:reverse">
                    <td 
                        ng-repeat="(key, value) in boleta" 
                        ng-hide="option_radio == 'analytic' && key == 'average_price' || option_radio == 'synthetic' && key == 'boleta_number' || option_radio == 'synthetic' && key == 'unit_price' || option_radio == 'synthetic' && key == 'action'">
                      {{ value }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>]]></template>
    </sp_widget>
</record_update>
